# v2ray配置
使用v2ray作为转发服务器，提供转发路由。只作为中继点，如果需要自行搭建梯子，需要在国外购买服务器搭建，搭建vpn不是本app的目的。
## 目的
想搭建一个在任何地点都能够翻墙的代理，云服务器是最好的选择，稳定运行，提供固定 ip。但是对于我来说，没有信用卡，就意味着不太好购买到国外的服务器，只能通过第三方 vpn 提供支持，使用国内服务器作为跳板实现翻墙。那问题来了，既然有了第三方的 vpn 为啥还要搭建一个国内的服务器呢，不是多此一举么。是这样的，其实在自己的 GUI 界面的操作系统下，第三方的工具已经能够满足要求，然而，有些时候遇到只能使用命令行操作的电脑或电脑上服务就比较麻烦了，这些好用简单的工具为了通用性，都是图形化的界面，没有 GUI 的电脑根本没法安装配置。所以不得不再配置一个简单的代理，输入地址就可以翻墙。刚刚说到，第三方vpn也会提供链接，但这个链接是专属的，只能由某些软件识别解析，因此不能直接使用，这个加密的链接解析出来是 v2ray 专属的配置，因此准备使用原生的 v2ray 结合这个配置再代理 http 流量，实现任何地点都能通过这个 http 链接 访问国外的网站。
## 过程
使用 [googlehelper](http://googlehelper.net/)提供的手机代理工具实现国外网站的访问。ghelper本是一个浏览器代理工具，但是提供了v2ray 订阅链接，为有GUI的操作系统包括手机、Linux系统、windows系统提供vpn支持，使用的第三方工具有v2rayN、v2rayL就可以使用这个链接。这个链接需要解析，原生的v2ray中似乎没发现解析的方法，因此借助第三方工具 v2rayN windows下的图形化软件获取到配置信息。
+ 首先将订阅链接导入到v2rayN中
+ 去v2rayN的安装目录下，找到 `config.json` 文件，这个文件就是v2ray能够识别的文件
+ 替换掉这个目录的config.json 文件，启动 `docker-compose up` 就成功搭建了一个代理

## 配置文件解析
配置文件中有两个关键属性，**inbounds** 和 **outbounds**,inbounds 中包含关键的http代理，这个地方的属性关系到你能否通过http代理访问到国内的服务器，其中需要指明的是代理端口，这里使用1080. outbounds 属性下就是连接国外vpn的关键配置，有软件生成后不需要更改。之前尝试自己配置但失败了，所以使用软件生成的比较靠谱。

## 使用方法
在linux命令行下，使用 `export http_proxy="ip:1080"` 就可以临时创建一个vpn环境，终端推出后失效。不建议配置成固定的。当然也可以使用一些工具例如 wget 配合使用代理，不用设置export 环境变量。